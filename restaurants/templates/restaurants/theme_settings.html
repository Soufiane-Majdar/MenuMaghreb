{% extends 'restaurants/base.html' %}
{% load crispy_forms_tags %}

{% block title %}Theme Settings - {{ restaurant.name }}{% endblock %}

{% block content %}
<div class="row mb-4">
    <div class="col">
        <h1>Theme Settings - {{ restaurant.name }}</h1>
    </div>
</div>

<div class="row">
    <div class="col-md-8">
        <div class="card">
            <div class="card-body">
                <form method="post">
                    {% csrf_token %}
                    <div class="mb-3">
                        <label for="primary_color" class="form-label">Primary Color</label>
                        <input type="color" class="form-control form-control-color" id="primary_color" name="primary_color" value="{{ theme.primary_color }}" title="Choose primary color">
                    </div>
                    <div class="mb-3">
                        <label for="secondary_color" class="form-label">Secondary Color</label>
                        <input type="color" class="form-control form-control-color" id="secondary_color" name="secondary_color" value="{{ theme.secondary_color }}" title="Choose secondary color">
                    </div>
                    <div class="mb-3">
                        <label for="background_color" class="form-label">Background Color</label>
                        <input type="color" class="form-control form-control-color" id="background_color" name="background_color" value="{{ theme.background_color }}" title="Choose background color">
                    </div>
                    <div class="mb-3">
                        <label for="font_family" class="form-label">Font Family</label>
                        <select class="form-select" id="font_family" name="font_family">
                            <option value="Arial" {% if theme.font_family == 'Arial' %}selected{% endif %}>Arial</option>
                            <option value="Helvetica" {% if theme.font_family == 'Helvetica' %}selected{% endif %}>Helvetica</option>
                            <option value="Times New Roman" {% if theme.font_family == 'Times New Roman' %}selected{% endif %}>Times New Roman</option>
                            <option value="Georgia" {% if theme.font_family == 'Georgia' %}selected{% endif %}>Georgia</option>
                            <option value="Verdana" {% if theme.font_family == 'Verdana' %}selected{% endif %}>Verdana</option>
                        </select>
                    </div>
                    <div class="d-grid">
                        <button type="submit" class="btn btn-primary">Save Theme Settings</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <div class="col-md-4">
        <div class="card">
            <div class="card-body">
                <h5 class="card-title">Preview</h5>
                <div id="preview" style="padding: 15px; border-radius: 8px; margin-top: 15px;">
                    <h3>Sample Menu Item</h3>
                    <p>This is how your menu text will look with the selected theme.</p>
                    <span class="badge" style="background-color: var(--primary-color)">Category</span>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    const preview = document.getElementById('preview');
    const primaryColor = document.getElementById('primary_color');
    const secondaryColor = document.getElementById('secondary_color');
    const backgroundColor = document.getElementById('background_color');
    const fontFamily = document.getElementById('font_family');

    function updatePreview() {
        preview.style.backgroundColor = backgroundColor.value;
        preview.style.color = primaryColor.value;
        preview.style.fontFamily = fontFamily.value;
        preview.style.borderLeft = `4px solid ${secondaryColor.value}`;
    }

    [primaryColor, secondaryColor, backgroundColor, fontFamily].forEach(input => {
        input.addEventListener('change', updatePreview);
    });

    updatePreview();
});
</script>
{% endblock %}
